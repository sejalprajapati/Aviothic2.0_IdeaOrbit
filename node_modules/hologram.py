import sys, os
from rembg import remove
from PIL import Image, ImageSequence

path = sys.argv[1]
output_gif = os.path.splitext(path)[0] + ".gif"

# Background remove
input_img = Image.open(path)
output = remove(input_img)

# Simple flickering effect
frames = []
for i in range(5):
    frame = output.copy()
    frame.putalpha(150 + i*20)
    frames.append(frame)

frames[0].save(output_gif, save_all=True, append_images=frames[1:], duration=100, loop=0)
print("âœ… GIF generated:", output_gif)
